# ShortLinks CLI

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏.

---

## –û–ø–∏—Å–∞–Ω–∏–µ

ShortLinks CLI ‚Äî –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏.  
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –∫–∞–∫ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ JOOQ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQL –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–±—ä–µ–∫—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏.

---

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- **Spring Context** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.  
- **SQLite JDBC** ‚Äî –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite.  
- **JOOQ** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ DSL.  
- **Lombok** ‚Äî —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ (–≥–µ—Ç—Ç–µ—Ä—ã, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∏ —Ç.–¥.).  
- **Liquibase** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.  

---

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ –∏ –∑–∞–ø—É—Å–∫—É

| –≠—Ç–∞–ø | –ö–æ–º–∞–Ω–¥–∞ |
|------|----------|
| 0. –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | `./gradlew dependencies --refresh-dependencies` |
| 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `./gradlew update` |
| 2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å JOOQ-–∫–æ–¥ | `./gradlew generateJooq` |
| 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞ | `./gradlew spotlessCheck` |
| 4. –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç | `./gradlew build` |
| 5. –°–æ–∑–¥–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π jar | `./gradlew :fatJar` |

**–ó–∞–ø—É—Å–∫ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:**
```bash
java -jar build/libs/shortlinks.jar help
```

---

## –ö–æ–º–∞–Ω–¥—ã CLI

- **shorten** ‚Äî —Å–æ–∑–¥–∞—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ URL.  
- **prune** ‚Äî —É–¥–∞–ª–∏—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É –∏–ª–∏ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.  
- **open** ‚Äî –æ—Ç–∫—Ä—ã—Ç—å —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ.  
- **ttlGlobal** ‚Äî –∑–∞–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫ (TTL).  
- **help** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º.

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `admin.properties`.  
- –ü–∞—Ä–∞–º–µ—Ç—Ä `admin.password` –∑–∞–¥–∞—ë—Ç –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.  
- –ö–æ–º–∞–Ω–¥—ã, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–µ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`shorten`, `open`), –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `-u <uuid>`.

---

## –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

```
ShortLinks CLI ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
------------------------------------------------------------

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
  java -jar shortlinks.jar <–∫–æ–º–∞–Ω–¥–∞> [–æ–ø—Ü–∏–∏] [–∞—Ä–≥—É–º–µ–Ω—Ç—ã]

–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

  shorten
      –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ URL.
      –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-u) –∏ –∏—Å—Ö–æ–¥–Ω—ã–π URL.
      –ï—Å–ª–∏ UUID –Ω–µ –∑–∞–¥–∞–Ω, —Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
      –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -ttl ‚Äî ttl —Å—Å—ã–ª–∫–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
      –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∏–∂–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ ttl, -nq ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ
      —Å—Å—ã–ª–∫–µ. –ï—Å–ª–∏ -ttl –∏–ª–∏ -nq –Ω–µ –∑–∞–¥–∞–Ω—ã, —Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —á–∏—Å–ª–æ
      –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–∫–∏.
      –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å —ç—Ç–æ–π —Å—Å—ã–ª–∫–æ–π.

  prune
      –£–¥–∞–ª–∏—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É.
      –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ —Å—Ç–∞–Ω–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.
      –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-u) –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π URL.
      –ï—Å–ª–∏ UUID –Ω–µ –∑–∞–¥–∞–Ω, —Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–¥ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é –∞–¥–º–∏–Ω–∞.

  open
      –ü–µ—Ä–µ–π—Ç–∏ –ø–æ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ.
      –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—É—é —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é.
      –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-u) –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π URL.

  ttlGlobal
      –ó–∞–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π ttl –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö.
      –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ttl, —Ç—Ä–µ–±—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–¥ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

  help
      –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ.

------------------------------------------------------------
```

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û–±—â–∏–π –æ–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç **ShortLinks CLI** –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:

```
CLI ‚Üí Processing ‚Üí Services ‚Üí Repositories ‚Üí Database
           ‚Üë                ‚Üì
        Config           Model / Utils
```

–ö–∞–∂–¥—ã–π —Å–ª–æ–π –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–∞–∫–µ—Ç –∏ —á—ë—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.  

---

### 1. CLI (`anton.asmirko.app.CLI`)

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–∞–∑–±–æ—Ä –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –æ–±—ä–µ–∫—Ç—ã-–∫–æ–º–∞–Ω–¥—ã (`CLICommand`).  
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (`KeyValueValidator`) –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (`IllegalCommandException`).

---

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ (`anton.asmirko.app.processing`)

`CLICommandProcessor` –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∫ –Ω—É–∂–Ω–æ–º—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É (`CLICommandProcessingAlg`).  
–ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ (`shorten`, `open`, `prune`, `ttlGlobal`, `help`) –∏–º–µ–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π.  

---

### 3. –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (`anton.asmirko.app.service.*`)

–ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –≤—ã–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:  
- `ShortenLinkService` ‚Äî –≤—ã–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è (`Base62` –∏–ª–∏ `Identity`).  
- `UUIDService` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è UUID.

---

### 4. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (`anton.asmirko.app.repository.*`)

–†–∞–±–æ—Ç–∞ —Å SQLite —á–µ—Ä–µ–∑ **JOOQ**:
- `LinksRepository` ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏.  
- `ShortenedLinksRepository` ‚Äî —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏.  
- `UsersRepository` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.  
- `LinksSequenceRepository` ‚Äî —Å—á—ë—Ç—á–∏–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.  
- `TtlGlobalRepository` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π TTL.

---

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`anton.asmirko.app.config`)

- `SqliteConfig` ‚Äî –ø—É—Ç—å –∫ –±–∞–∑–µ (`db.path`).  
- `AdminConfig` ‚Äî –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`admin.password`).  
- `JooqConfig` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ `DSLContext`.  
- `UserConfig` ‚Äî –±–∏–Ω —Ñ–∞–±—Ä–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  

---

### 6. –ú–æ–¥–µ–ª—å (`anton.asmirko.app.model.*`)

- –ö–æ–º–∞–Ω–¥—ã CLI (`ShortenLinkCommand`, `OpenLinkCommand`, `PruneCommand`, `TtlGlobalCommand`, `HelpCommand`).  
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`AdminUser`, `UUIDUser`) —á–µ—Ä–µ–∑ –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `User` –∏ —Ñ–∞–±—Ä–∏–∫—É `UserFactory`.

---

### 7. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã (`anton.asmirko.app.utils`)

- `Base62` ‚Äî –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª –≤ Base62.  
- `BaseUrlUtils` ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ (`clck.ru/` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).  

---

### 8. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

- `Main` ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç Spring `AnnotationConfigApplicationContext` –∏ –±–∏–Ω `ShortLinksApp`.  
- `ShortLinksApp` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç `CLIReader ‚Üí CLICommandProcessor`.

---

### 9. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|------------|
| `users` | UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `links` | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ URL |
| `shortened_links` | –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ —Å—Å—ã–ª–∫–∞–º–∏ |
| `links_sequence` | –°—á—ë—Ç—á–∏–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |
| `ttl_global` | –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫ |

---

### 10. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Gradle**:
- `org.liquibase.gradle` ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î.  
- `nu.studer.jooq` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–æ–≤ JOOQ.  
- `com.diffplug.spotless` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞.  

–ó–∞–¥–∞—á–∏:
```
./gradlew update
./gradlew generateJooq
./gradlew spotlessCheck
./gradlew build
./gradlew fatJar
```

---

### 11. –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

- **DI / IoC** ‚Äî –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Spring Context.  
- **Command** ‚Äî –∫–∞–∂–¥–∞—è CLI-–∫–æ–º–∞–Ω–¥–∞ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å.  
- **Strategy** ‚Äî –≤—ã–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è.  
- **Repository** ‚Äî —Å–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ JOOQ.  
- **Factory** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤.  

---

### 12. –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏–º–µ—Ä shorten ‚Üí open)

1. `Main` –≤—ã–∑—ã–≤–∞–µ—Ç `ShortLinksApp.run()`.  
2. `CLIReader` —Å–æ–∑–¥–∞—ë—Ç `ShortenLinkCommand`.  
3. `CLICommandProcessor` –Ω–∞—Ö–æ–¥–∏—Ç `ShortenCommandProcessingAlg`.  
4. –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–∑—ã–≤–∞–µ—Ç `ShortenLinkService` ‚Üí `Base62ShorteningAlgorithm` ‚Üí `LinksSequenceRepository`.  
5. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ShortenedLinksRepository`.  
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É `clck.ru/ABCd`.  

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

### 1. –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:
```bash
./gradlew test
```

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (`CLIReader`);
- –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∫–æ–º–∞–Ω–¥ (`ShortenCommandProcessingAlg`, `OpenLinkCommandProcessingAlg`);
- —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –º–æ–∫–∞–º–∏ (`ShortenedLinksRepository`, `UsersRepository`);
- –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

---

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π CLI

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É
java -jar shortlinks.jar shorten https://yandex.ru

# –û—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É
java -jar shortlinks.jar open -u <uuid> clck.ru/ABC

# –£–¥–∞–ª–∏—Ç—å —Å—Å—ã–ª–∫—É
java -jar shortlinks.jar prune -u <uuid> clck.ru/ABC

# –ó–∞–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π TTL (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
java -jar shortlinks.jar ttlGlobal 600
```

---

### 3. –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

```
–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 550e8400-e29b-41d4-a716-446655440000
clck.ru/Ba1

java -jar shortlinks.jar open -u 550e8400-e29b-41d4-a716-446655440000 clck.ru/Ba1
–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—É—é —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
```

---